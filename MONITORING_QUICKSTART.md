# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –±—ã—Å—Ç—Ä–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

## –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω—ã)
docker compose down

# –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
docker compose up -d --build
```

## –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
docker compose ps

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã:
# - 8 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ (user, homework, gradebook, profile, notifications, tests, schedule, reports)
# - postgres
# - prometheus
# - grafana
# - loki
# - promtail
# - postgres-exporter
```

## –®–∞–≥ 3: –î–æ—Å—Ç—É–ø –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

### Grafana (–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. –í–æ–π–¥–∏—Ç–µ —Å credentials:
   - Username: `admin`
   - Password: `admin`
3. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –º–æ–∂–Ω–æ —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å (–∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å)

### Prometheus (–ú–µ—Ç—Ä–∏–∫–∏)
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:9090
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Status > Targets
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ targets –≤ —Å—Ç–∞—Ç—É—Å–µ "UP" (–∑–µ–ª–µ–Ω—ã–µ)

## –®–∞–≥ 4: –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞—à–±–æ—Ä–¥–æ–≤

### –í Grafana:

1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É "‚ò∞" (–º–µ–Ω—é) —Å–ª–µ–≤–∞
2. –í—ã–±–µ—Ä–∏—Ç–µ "Dashboards"
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É "Services"
4. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã:
   - **Microservices Overview** - –º–µ—Ç—Ä–∏–∫–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
   - **PostgreSQL Database Monitoring** - –º–µ—Ç—Ä–∏–∫–∏ PostgreSQL

## –®–∞–≥ 5: –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

### –í Grafana Explore:

1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É –∫–æ–º–ø–∞—Å–∞ (üß≠) —Å–ª–µ–≤–∞
2. –í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö "Loki"
3. –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:

```logql
# –í—Å–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
{service="user-service"}

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
{level="ERROR"}

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
{} | json | request_id="your-request-id"

# –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (> 1 —Å–µ–∫—É–Ω–¥–∞)
{} | json | duration_ms > 1000
```

## –®–∞–≥ 6: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ –¥–µ–π—Å—Ç–≤–∏–∏, —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–∏—Å—ã:

```bash
# –ü—Ä–∏–º–µ—Ä –¥–ª—è user-service
curl http://localhost:8001/health

# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞–ø—Ä—è–º—É—é
curl http://localhost:8001/metrics

# –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl -X POST http://localhost:8001/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "TestPass123!",
    "first_name": "Test",
    "last_name": "User",
    "role": "student"
  }'
```

## –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫

### –í Prometheus:

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:9090
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Graph"
3. –í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å—ã:

```promql
# –ó–∞–ø—Ä–æ—Å—ã –≤ —Å–µ–∫—É–Ω–¥—É –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º
sum(rate(http_requests_total[5m])) by (service)

# –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
avg(rate(http_request_duration_seconds_sum[5m])) by (service) / avg(rate(http_request_duration_seconds_count[5m])) by (service)
```

### –í Grafana:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–∞—à–±–æ—Ä–¥ "Microservices Overview"
2. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ —Å –¥–∞–Ω–Ω—ã–º–∏

## –®–∞–≥ 8: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
# JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
docker logs user-service -f

# –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å JSON —Ñ–æ—Ä–º–∞—Ç:
# {"timestamp":"2025-12-07T...", "level":"INFO", "service":"user-service", ...}
```

### –í Grafana Explore:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Explore
2. –í—ã–±–µ—Ä–∏—Ç–µ Loki
3. –í–≤–µ–¥–∏—Ç–µ: `{service="user-service"}`
4. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏

## –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Prometheus –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å targets
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:9090/targets
# –í—Å–µ targets –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å UP (–∑–µ–ª–µ–Ω—ã–µ)

# –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å DOWN, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker logs prometheus
docker logs user-service
```

### Grafana –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Prometheus
# Configuration > Data Sources > Prometheus
# –ù–∞–∂–º–∏—Ç–µ "Save & Test" - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "Data source is working"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω (–≤–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞)
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ "Last 15 minutes"
```

### –õ–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ Loki

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Promtail
docker logs promtail

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Loki
docker logs loki

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ª–æ–≥–∏ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
docker logs user-service | head -5
```

### –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
docker compose restart user-service

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ endpoint /metrics
curl http://localhost:8001/metrics

# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 15-30 —Å–µ–∫—É–Ω–¥ (–∏–Ω—Ç–µ—Ä–≤–∞–ª —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫)
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose logs -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker compose logs -f user-service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
docker compose restart prometheus grafana loki promtail

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –û—á–∏—Å—Ç–∫–∞ –∏ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose down -v
docker compose up -d --build
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:
   - [MONITORING.md](MONITORING.md) - –ø–æ–¥—Ä–æ–±–Ω–æ –æ –º–µ—Ç—Ä–∏–∫–∞—Ö –∏ –¥–∞—à–±–æ—Ä–¥–∞—Ö
   - [LOGGING.md](LOGGING.md) - –ø–æ–¥—Ä–æ–±–Ω–æ –æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ –ø–æ–∏—Å–∫–µ

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –≤ Grafana –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫

3. –ò–∑—É—á–∏—Ç–µ PromQL –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: `docker logs <container-name>`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–æ—Ä—Ç—ã —Å–≤–æ–±–æ–¥–Ω—ã (9090, 3000, 3100)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Docker —Ä–µ—Å—É—Ä—Å—ã (–ø–∞–º—è—Ç—å, CPU)
4. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ MONITORING.md –∏ LOGGING.md

## –î–µ–º–æ –¥–∞–Ω–Ω—ã–µ

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –º–µ—Ç—Ä–∏–∫–∏:
- Health check —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –æ–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
- PostgreSQL Exporter —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –ë–î –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
- –í—Å–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ —Ç—Ä–µ–∫–∞—é—Ç—Å—è

–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ API –ª—é–±–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

